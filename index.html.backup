<!DOCTYPE html>
<html lang="pl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>❄️ Lista Prezentów Świątecznych ⛄</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    animation: {
                        'fade-in-up': 'fadeInUp 0.8s ease-out forwards',
                        'pulse-slow': 'pulse 3s infinite',
                    },
                    keyframes: {
                        fadeInUp: {
                            '0%': { opacity: '0', transform: 'translateY(20px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        }
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            /* Modern Mesh/Radial Gradient Background */
            background-color: #7f1d1d;
            /* Deep Red Base */
            background-image:
                radial-gradient(circle at 0% 0%, rgba(239, 68, 68, 0.8) 0%, transparent 50%),
                radial-gradient(circle at 100% 100%, rgba(249, 115, 22, 0.6) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(185, 28, 28, 0.5) 0%, transparent 60%);
            background-attachment: fixed;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
            color: white;
        }

        /* Snowflakes - FOREGROUND & CLICK-THROUGH */
        .snowflake {
            position: fixed;
            top: -20px;
            z-index: 9999;
            pointer-events: none;
            user-select: none;
            cursor: default;
            animation-name: snowfall;
            animation-duration: 10s;
            animation-timing-function: linear;
            animation-iteration-count: infinite;
            background-color: white;
            border-radius: 50%;
            opacity: 0.9;
        }

        @keyframes snowfall {
            0% {
                transform: translateY(0vh) rotate(0deg);
            }

            100% {
                transform: translateY(100vh) rotate(360deg);
            }
        }

        /* Glassmorphism Utilities */
        .glass-panel {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .glass-card:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.25);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            border-color: rgba(255, 255, 255, 0.5);
        }

        /* Loaders */
        .loading-animation {
            border-top-color: #ffffff;
            animation: spinner 1.5s linear infinite;
        }

        .image-loader {
            border-top: 3px solid #ffffff;
            border-right: 3px solid transparent;
            border-bottom: 3px solid transparent;
            border-left: 3px solid transparent;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
        }

        @keyframes spinner {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        /* Store Filter Tabs */
        .store-tab {
            cursor: pointer;
            padding: 0.75rem 1.5rem;
            border-radius: 1rem;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            color: white;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        <div class="image-loader rounded-full"></div></div><div class="flex-grow"><div class="mb-4"><span class="inline-block px-3 py-1 rounded-full text-[10px] font-bold tracking-widest uppercase bg-white/10 text-white/80 mb-2 border border-white/10">$ {
            product.category
        }

        </span><h2 class="text-xl font-bold text-white leading-tight">$ {
            product.name
        }

        </h2></div><div class="space-y-3 mt-auto">$ {
            pricesHTML
        }

        </div></div></div>`;
        }

        const localImages= {
            "Carcassone": "images/carcassonne.png",
                "Hellas & Elysium": "images/hellas_elysium.png",
                "Preludium": "images/preludium.jpg",
                "Zestaw 5 plansz graczy (z wycięciami)": "images/player_boards.jpg",
                "Wenus": "images/wenus.jpg",
                "Niepokoje": "images/niepokoje.png",
                "Miasta i Rycerze": "images/miasta_i_rycerze.png",
                "Kupcy i Barbarzyńcy": "images/kupcy_i_barbarzyncy.png",
                "Klawiatura Logitech K400 Plus Szary": "images/logitech_k400.png",
                "Lupa do telefonu 16+Cali": "images/lupa_do_telefonu.png",
                "Żarówka Wifi RGB minimum 1000lm": "images/zarowka_rgb.png",
                "Kostka Antystresowa": "images/kostka_antystresowa.png"
        }

        ;

        async function updateProductImage(product, index) {
            const imageContainer=document.getElementById(`product-image-$ {
                    index
                }

                `);
            if ( !imageContainer) return;

            if (localImages[product.name]) {
                imageContainer.innerHTML=`<img src="${localImages[product.name]}" alt="${product.name}" class="object-contain w-full h-full p-4 transition-transform duration-500 group-hover:scale-110 drop-shadow-xl">`;
            }

            else {
                imageContainer.innerHTML=`<div class="text-center text-white/40 text-xs font-bold">❄️ Brak zdjęcia</div>`;
            }
        }

        // Store filter logic
        let allProducts=[];
        let currentStore='all';

        function filterAndRenderProducts() {
            let filteredProducts=allProducts;

            if (currentStore !=='all') {
                filteredProducts=allProducts.filter(({
                        product
                    })=> product.prices.some(p=> p.seller===currentStore));
        }

        let htmlContent='<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">';

        filteredProducts.forEach(({
                product, index

            })=> {
            htmlContent +=renderProductCard(product, index);
        });
        htmlContent+='</div>';

        productListContainer.innerHTML=htmlContent;

        // Update images for filtered products
        filteredProducts.forEach(({
                product, index
            })=> updateProductImage(product, index));
        }

        async function initializeApp() {
            try {
                const products=parseCSV(csvData);

                allProducts=products.map((product, index)=> ({
                        product, index
                    }));

            filterAndRenderProducts();
            loadingIndicator.classList.add('hidden');

            // Setup tab click handlers
            document.querySelectorAll('.store-tab[data-store]').forEach(tab=> {
                    tab.addEventListener('click', ()=> {
                            // Update active state
                            document.querySelectorAll('.store-tab[data-store]').forEach(t=> t.classList.remove('active'));
                            tab.classList.add('active');

                            // Update current store and filter
                            currentStore=tab.dataset.store;
                            filterAndRenderProducts();
                        });
                });

        }

        catch (error) {
            console.error(error);
            loadingIndicator.classList.add('hidden');

            productListContainer.innerHTML=`<div class="glass-panel p-8 text-center text-red-200 text-xl font-bold">❄️ Wystąpił błąd: $ {
                error.message
            }

            </div>`;
        }
        }

        initializeApp();
        </script></body></html>